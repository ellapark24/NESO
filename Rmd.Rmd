---
title: "Assignment 1"
author: "Ella Park, Rosie Crookes, Kieran Marguerie de Rotrou"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```

## R Markdown

Testing

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r data setup}

data <- read_csv("20161213_uk_wind_solar_demand_temperature_SCS2.csv")

data <- data %>%
  mutate(
    Local_DateTime = dmy_hm(`Local Time`),
    Month = month(Local_DateTime),
    WeekdayNum = wday(Local_DateTime) - 1,
    Year = year(Local_DateTime),
    Date = as.Date(Local_DateTime),
    Hour = hour(Local_DateTime)  # Extract hour
  )


# Average Temperature between 3 and 6pm
TO_data <- data %>%
  filter(Hour >= 15 & Hour <= 18) %>%
  group_by(Date) %>%
  summarise(TO = mean(temp_merra1, na.rm = TRUE))%>%
  ungroup()

data <- data %>%
  select(-Hour)


data <- data %>%
  left_join(TO_data, by = "Date")


# Define the months you want to keep
desired_months <- c(11, 12, 1, 2, 3)

# Filter rows where Month is in desired_months
filtered_data <- data[data$Month %in% desired_months & data$Year != 2015, ]

filtered_data <- filtered_data %>%
  mutate(
    Date = as.Date(dmy_hm(`Local Time`))  # Extract full date
  ) %>%
  group_by(Date) %>%
  summarise(
    across(where(is.numeric), mean, na.rm = TRUE)
  ) %>%
  ungroup()




```
